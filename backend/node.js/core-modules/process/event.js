// SIGINT — пользователь нажал Ctrl+C
process.on('SIGINT', () => {
  console.log('\nВы нажали Ctrl+C! Завершаю работу...');
  process.exit(0); // Завершаем процесс корректно
});

// ! ================================================================================

// SIGTERM — система просит завершиться (например, при остановке контейнера Docker)
process.on('SIGTERM', () => {
  console.log('Получен запрос на завершение от системы');

  server.close(() => {
    console.log('Сервер остановлен');
    process.exit(0);
  });
});

// ! ================================================================================

// warning — предупреждения Node.js
process.on('warning', (warning) => {
  console.warn('Node.js предупреждает:', warning.message);
  // Можно логировать, но не обязательно завершать процесс
});

// ! ================================================================================

// exit — последний шанс выполнить код перед завершением
process.on('exit', (code) => {
  console.log(`Процесс завершается с кодом ${code}`);
  // Только синхронный код! Асинхронный уже не выполнится
  fs.writeFileSync('log.txt', 'Процесс завершен'); // Синхронно - можно
});

// ! ================================================================================

// ? beforeExit — когда событийный цикл пуст
process.on('beforeExit', (code) => {
  console.log('Все задачи выполнены, можно что-то доделать');
  // Можно запустить асинхронный код
  setTimeout(() => {
    console.log('Это выполнится!');
  }, 1000);
});